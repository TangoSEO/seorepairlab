---
import Base from "@/layouts/Base.astro";
import { getCollectionCTM } from "@/lib/customContentLoader.astro";
import { markdownify } from "@/lib/utils/textConverter";
import CustomButton from "@/components/CustomButton.astro";

export async function getStaticPaths() {
  const services = await getCollectionCTM("services");
  const paths = services.map((service) => {
    const lang = service.id.split("/")[0]; // Assuming structure like english/slug.md
    const slug = service.slug; 
    return {
      params: { 
          lang: lang || "english",
          slug: slug 
      },
      props: { service },
    };
  });
  return paths;
}

const { service } = Astro.props;
const { title, description } = service.data;
---

<Base title={title} metaDescription={description}>
  <section class="py-24 bg-white border-b-2 border-black" style="background-image: linear-gradient(#f0f0f0 1px, transparent 1px), linear-gradient(90deg, #f0f0f0 1px, transparent 1px); background-size: 40px 40px;">
    <div class="container max-w-4xl space-y-12">
        
        {/* Header Block */}
        <div class="bg-white p-8 border-2 border-black shadow-[8px_8px_0px_0px_rgba(0,0,0,1)] text-center space-y-6">
             <h1 class="text-display-4 font-bold uppercase tracking-tighter text-black" set:html={markdownify(title)}></h1>
             <p class="text-lg font-mono text-black">{description}</p>
        </div>

        {/* Placeholder Content Block */}
        <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
            <div class="bg-white p-8 border-2 border-black">
                <h3 class="text-xl font-bold uppercase mb-4 border-b-2 border-black pb-2">The Problem</h3>
                <p class="font-mono text-sm leading-relaxed">
                    [Placeholder] Description of the common challenges related to {title}. 
                    Detailed analysis of why this issues hurts organic performance.
                </p>
            </div>
             <div class="bg-white p-8 border-2 border-black">
                <h3 class="text-xl font-bold uppercase mb-4 border-b-2 border-black pb-2">My Solution</h3>
                <p class="font-mono text-sm leading-relaxed">
                     [Placeholder] Specific methodology for addressing {title}. 
                     Step-by-step approach to diagnosis and resolution.
                </p>
            </div>
        </div>

        <div class="text-center pt-8">
            <CustomButton 
                label="Discuss Project" 
                url="/contact" 
                class="btn-primary !border-2 !border-black hover:shadow-[4px_4px_0px_0px_rgba(0,0,0,1)] transition-shadow" 
            />
        </div>
    </div>
  </section>
</Base>
