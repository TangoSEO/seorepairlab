---
import Base from "@/layouts/Base.astro";
import { generatePaths } from "@/lib/utils/i18nUtils";

import { getEntryCTM } from "@/lib/customContentLoader.astro";
import BannerAgencyStartup from "@/components/sections/Banner.astro";

import ServicesSection from "@/components/sections/ServicesSection.astro";
import FeaturedCaseStudy from "@/components/sections/FeaturedCaseStudy.astro";
import TrustStrip from "@/components/sections/TrustStrip.astro";

export function getStaticPaths() {
  return generatePaths();
}

const page = await getEntryCTM("homepage", "-index", Astro.currentLocale);
const structuredData = [
  {
    "@context": "https://schema.org",
    "@type": "Person",
    "name": "Jessica Schmukler",
    "jobTitle": "Technical SEO Specialist",
    "email": "mailto:it@seorepairlab.com",
    "url": "https://seorepairlab.com/",
    "sameAs": ["https://www.linkedin.com/in/technicalseo/"],
    "worksFor": { "@type": "Organization", "name": "SEO Repair Lab" },
    "address": { "@type": "PostalAddress", "addressLocality": "Tandil", "addressCountry": "AR" },
    "areaServed": ["US", "CA", "EU"]
  },
  {
    "@context": "https://schema.org",
    "@type": "Service",
    "name": "Technical SEO Audit",
    "provider": { "@type": "Person", "name": "Jessica Schmukler" },
    "offers": { "@type": "Offer", "priceCurrency": "USD", "price": "500", "url": "https://seorepairlab.com/" }
  }
];
---

<Base {...page?.data} structuredData={structuredData} headerPosition="fixed" hasHeaderDarkBackground={false}>
  <BannerAgencyStartup />
  <TrustStrip />
  <ServicesSection />
  <FeaturedCaseStudy />
</Base>
